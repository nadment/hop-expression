<?xml version="1.0" encoding="UTF-8"?>
<pipeline>
  <info>
    <name>demo_aggregate</name>
    <name_sync_with_filename>Y</name_sync_with_filename>
    <description/>
    <extended_description/>
    <pipeline_version/>
    <pipeline_type>Normal</pipeline_type>
    <pipeline_status>0</pipeline_status>
    <parameters>
      <parameter>
        <name>DYNAMIC_FIELD_NAME</name>
        <default_value>ROWNUM</default_value>
        <description/>
      </parameter>
      <parameter>
        <name>PERIOD</name>
        <default_value>202005</default_value>
        <description/>
      </parameter>
      <parameter>
        <name>START_DATE</name>
        <default_value>2020-01-01</default_value>
        <description/>
      </parameter>
    </parameters>
    <capture_transform_performance>N</capture_transform_performance>
    <transform_performance_capturing_delay>1000</transform_performance_capturing_delay>
    <transform_performance_capturing_size_limit>100</transform_performance_capturing_size_limit>
    <created_user>-</created_user>
    <created_date>2020/04/05 18:12:39.120</created_date>
    <modified_user>-</modified_user>
    <modified_date>2020/04/05 18:12:39.120</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <order>
    <hop>
      <from>Data grid</from>
      <to>Aggregation</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Data grid 2</from>
      <to>Aggregation 2</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <transform>
    <name>Aggregation</name>
    <type>Aggregate</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <aggregates>
      <field>
        <expression>AVG(Amount)</expression>
        <name>AVG</name>
      </field>
      <field>
        <expression>COUNT(CITY)</expression>
        <name>COUNT</name>
      </field>
      <field>
        <expression>COUNT(DISTINCT CITY)</expression>
        <name>COUNT_DISTINCT</name>
      </field>
      <field>
        <expression>COUNT(*)</expression>
        <name>COUNT_ALL</name>
      </field>
      <field>
        <expression>SUM(Amount)</expression>
        <name>TOTAL</name>
      </field>
      <field>
        <expression>SUM(CASE WHEN Amount>10 THEN Amount END)</expression>
        <name>TOTAL_OVER_10</name>
      </field>
      <field>
        <expression>MAX(Period)</expression>
        <name>MAX_PERIOD</name>
      </field>
      <field>
        <expression>MIN(Period)</expression>
        <name>MIN_PERIOD</name>
      </field>
      <field>
        <expression>MAX(Upper(CITY))</expression>
        <name>MAX_CITY</name>
      </field>
      <field>
        <expression>FIRST_VALUE(City RESPECT NULLS)</expression>
        <name>FIRST_CITY</name>
      </field>
      <field>
        <expression>LAST_VALUE(City IGNORE NULLS)</expression>
        <name>LAST_CITY</name>
      </field>
      <field>
        <expression>MEDIAN(Amount)</expression>
        <name>MEDIAN</name>
      </field>
      <field>
        <expression>PERCENTILE(Amount,25)</expression>
        <name>PERCENTILE25</name>
      </field>
      <field>
        <expression>PERCENTILE(Amount,50)</expression>
        <name>PERCENTILE50</name>
      </field>
      <field>
        <expression>PERCENTILE(Amount,75)</expression>
        <name>PERCENTILE75</name>
      </field>
      <field>
        <expression>STDDEV_SAMP(Amount)</expression>
        <name>STDDEV_SAMP</name>
      </field>
      <field>
        <expression>STDDEV_POP(Amount)</expression>
        <name>STDDEV_POP</name>
      </field>
      <field>
        <expression>VARIANCE_POP(Amount)</expression>
        <name>VARIANCE_POP</name>
      </field>
      <field>
        <expression>VARIANCE_SAMP(Amount)</expression>
        <name>VARIANCE_SAMP</name>
      </field>
      <field>
        <expression>LISTAGG(DISTINCT City)</expression>
        <name>CITIES</name>
      </field>
      <field>
        <expression>LISTAGG(City,'->')</expression>
        <name>CITIES_ALL</name>
      </field>
    </aggregates>
    <ALWAYSGIVINGBACKONEROW>N</ALWAYSGIVINGBACKONEROW>
    <groups>
      <field>
        <name>Country</name>
      </field>
    </groups>
    <attributes/>
    <GUI>
      <xloc>272</xloc>
      <yloc>80</yloc>
    </GUI>
  </transform>
  <transform>
    <name>Aggregation 2</name>
    <type>Aggregate</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <aggregates>
      <field>
        <expression>AVG(Amount)</expression>
        <name>AVG</name>
      </field>
      <field>
        <expression>COUNT(CITY)</expression>
        <name>COUNT</name>
      </field>
      <field>
        <expression>COUNT(DISTINCT CITY)</expression>
        <name>COUNT_DISTINCT</name>
      </field>
      <field>
        <expression>COUNT(*)</expression>
        <name>COUNT_ALL</name>
      </field>
      <field>
        <expression>SUM(Amount)</expression>
        <name>TOTAL</name>
      </field>
      <field>
        <expression>SUM(CASE WHEN Amount>10 THEN Amount END)</expression>
        <name>TOTAL_OVER_10</name>
      </field>
      <field>
        <expression>MAX(Period)</expression>
        <name>MAX_PERIOD</name>
      </field>
      <field>
        <expression>MIN(Period)</expression>
        <name>MIN_PERIOD</name>
      </field>
      <field>
        <expression>MAX(Upper(CITY))</expression>
        <name>MAX_CITY</name>
      </field>
      <field>
        <expression>FIRST_VALUE(City RESPECT NULLS)</expression>
        <name>FIRST_CITY</name>
      </field>
      <field>
        <expression>LAST_VALUE(City IGNORE NULLS)</expression>
        <name>LAST_CITY</name>
      </field>
      <field>
        <expression>MEDIAN(Amount)</expression>
        <name>MEDIAN</name>
      </field>
      <field>
        <expression>PERCENTILE(Amount,25)</expression>
        <name>PERCENTILE25</name>
      </field>
      <field>
        <expression>PERCENTILE(Amount,50)</expression>
        <name>PERCENTILE50</name>
      </field>
      <field>
        <expression>PERCENTILE(Amount,75)</expression>
        <name>PERCENTILE75</name>
      </field>
      <field>
        <expression>STDDEV_SAMP(Amount)</expression>
        <name>STDDEV_SAMP</name>
      </field>
      <field>
        <expression>STDDEV_POP(Amount)</expression>
        <name>STDDEV_POP</name>
      </field>
      <field>
        <expression>VARIANCE_POP(Amount)</expression>
        <name>VARIANCE_POP</name>
      </field>
      <field>
        <expression>VARIANCE_SAMP(Amount)</expression>
        <name>VARIANCE_SAMP</name>
      </field>
      <field>
        <expression>LISTAGG(DISTINCT City)</expression>
        <name>CITIES</name>
      </field>
      <field>
        <expression>LISTAGG(City,'->')</expression>
        <name>CITIES_ALL</name>
      </field>
    </aggregates>
    <ALWAYSGIVINGBACKONEROW>Y</ALWAYSGIVINGBACKONEROW>
    <groups>
      <field>
        <name>Country</name>
      </field>
    </groups>
    <attributes/>
    <GUI>
      <xloc>592</xloc>
      <yloc>272</yloc>
    </GUI>
  </transform>
  <transform>
    <name>Data grid</name>
    <type>DataGrid</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <set_empty_string>N</set_empty_string>
        <length>-1</length>
        <name>Country</name>
        <precision>-1</precision>
        <type>String</type>
      </field>
      <field>
        <set_empty_string>N</set_empty_string>
        <length>-1</length>
        <name>City</name>
        <precision>-1</precision>
        <type>String</type>
      </field>
      <field>
        <set_empty_string>N</set_empty_string>
        <length>-1</length>
        <name>Amount</name>
        <precision>-1</precision>
        <type>Number</type>
      </field>
      <field>
        <set_empty_string>N</set_empty_string>
        <format>yyyy-MM-dd</format>
        <length>-1</length>
        <name>Period</name>
        <precision>-1</precision>
        <type>Date</type>
      </field>
    </fields>
    <data>
      <line>
        <item>BE</item>
        <item/>
        <item>8</item>
        <item>2022-09-01</item>
      </line>
      <line>
        <item>BE</item>
        <item>Bruxelles</item>
        <item>10</item>
        <item>2022-06-01</item>
      </line>
      <line>
        <item>BE</item>
        <item>Bruxelles</item>
        <item>12</item>
        <item>2019-06-01</item>
      </line>
      <line>
        <item>FR</item>
        <item>Paris</item>
        <item>5</item>
        <item>2022-06-01</item>
      </line>
      <line>
        <item>FR</item>
        <item>Paris</item>
        <item>20.2</item>
        <item>2022-04-01</item>
      </line>
      <line>
        <item>FR</item>
        <item>Marseille</item>
        <item>2</item>
        <item>2022-02-01</item>
      </line>
      <line>
        <item>US</item>
        <item>Orlando</item>
        <item>1</item>
        <item>2022-04-01</item>
      </line>
      <line>
        <item>US</item>
        <item/>
        <item>1</item>
        <item>2022-06-01</item>
      </line>
      <line>
        <item>FR</item>
        <item>Marseille</item>
        <item>42</item>
        <item>2022-05-01</item>
      </line>
      <line>
        <item>BE</item>
        <item>Bruxelles</item>
        <item>11</item>
        <item/>
      </line>
      <line>
        <item>FR</item>
        <item>Marseille</item>
        <item>9</item>
        <item>2022-11-01</item>
      </line>
      <line>
        <item>FR</item>
        <item>Strasbourg</item>
        <item>8</item>
        <item>2021-01-01</item>
      </line>
      <line>
        <item>FR</item>
        <item/>
        <item>9</item>
        <item>2022-12-01</item>
      </line>
    </data>
    <attributes/>
    <GUI>
      <xloc>128</xloc>
      <yloc>80</yloc>
    </GUI>
  </transform>
  <transform>
    <name>Data grid 2</name>
    <type>DataGrid</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <set_empty_string>N</set_empty_string>
        <length>-1</length>
        <name>Country</name>
        <precision>-1</precision>
        <type>String</type>
      </field>
      <field>
        <set_empty_string>N</set_empty_string>
        <length>-1</length>
        <name>City</name>
        <precision>-1</precision>
        <type>String</type>
      </field>
      <field>
        <set_empty_string>N</set_empty_string>
        <length>-1</length>
        <name>Amount</name>
        <precision>-1</precision>
        <type>Number</type>
      </field>
      <field>
        <set_empty_string>N</set_empty_string>
        <format>yyyy-MM-dd</format>
        <length>-1</length>
        <name>Period</name>
        <precision>-1</precision>
        <type>Date</type>
      </field>
    </fields>
    <data>
      <line>
        <item/>
        <item/>
        <item/>
        <item/>
      </line>
    </data>
    <attributes/>
    <GUI>
      <xloc>448</xloc>
      <yloc>272</yloc>
    </GUI>
  </transform>
  <transform_error_handling>
  </transform_error_handling>
  <attributes>
    <group>
      <name>debug_plugin</name>
    </group>
  </attributes>
</pipeline>
